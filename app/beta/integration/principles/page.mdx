# Integration Principles

AuditAuth enforces a strict boundary between authentication and application logic.

These principles define how AuditAuth must be integrated and how it must not be used.

---

## Authentication Is Centralized

Authentication always happens inside AuditAuth.

Applications:

- MUST NOT validate user credentials.
- MUST NOT issue access or refresh tokens.
- MUST NOT implement primary login workflows.

They redirect users to AuditAuth.

---

## Applications Enforce Identity

Applications are responsible for enforcing identity state.

They must:

- Validate access token usage at runtime boundaries.
- Reject invalid or expired sessions.
- Protect private routes and APIs.
- Enforce application scope isolation.

Enforcement is not authentication.

---

## Tokens Are Proof, Not State

Access tokens are cryptographic proofs issued by AuditAuth.

They are:

- Signed (`RS256`)
- Scoped per application
- Time-bound
- Verifiable independently

Applications must validate signature and claims before trusting token data.

---

## Server Boundaries Are Preferred

If your architecture supports a server boundary:

- Validate tokens server-side.
- Minimize token exposure in browser runtime.
- Centralize session validation and refresh logic.

The server-enforced model reduces attack surface.

---

## Client-Side Exposure Must Be Minimized

In browser-only environments:

- Tokens may be accessible to client code.
- Storage strategy MUST be treated as a security control.
- HTTPS is mandatory.
- Short-lived tokens are recommended.

If a backend exists, use it.

---

## Identity Is Application-Scoped

Each application has isolated identity configuration.

Tokens include an `app_id`.

Services must verify:

- The token belongs to the expected application.
- Cross-application identity is rejected.

There is no implicit global identity.

---

## SDKs Enforce, They Do Not Authenticate

All SDKs share a single principle:

They enforce identity state.

They do not:

- Issue tokens.
- Authenticate users directly.
- Replace the Identity Provider.

Authentication remains external.

---

## Observability Is Identity-Aware

Integration enables:

- Session-level metrics.
- Request metrics.
- Navigation tracking.

Metrics are scoped to authenticated sessions.

Observability is not a generic analytics layer.

---

## Deterministic Failure

If verification fails:

- Reject the request.
- Return `401 Unauthorized`.
- Do not attempt fallback logic.

Authentication state must be deterministic.

---

## Architectural Responsibility

AuditAuth owns:

- Authentication lifecycle.
- Token issuance.
- Identity event recording.

Your application owns:

- Access control enforcement.
- Business logic.
- Resource authorization.

Identity and business logic must remain separate.

---

## Final Rule

If your application contains authentication logic,
you are integrating AuditAuth incorrectly.
