# Identity

The Identity layer authenticates users and issues application-scoped session credentials.

It defines credential validation, token issuance, session lifecycle, and isolation boundaries.

Identity is centralized in AuditAuth.

Applications MUST NOT implement authentication logic directly.

---

## Authentication Methods

AuditAuth supports multiple authentication mechanisms:

- Email/password
- Social providers
- Multi-factor authentication (MFA)

Authentication is always performed within AuditAuthâ€™s domain.

When authentication is required, applications redirect to AuditAuth-managed endpoints.

Credentials never pass through the client application.

---

## Authentication Flow

The high-level authentication flow is:

1. A request targets a protected page or API.
2. The SDK checks session and token state.
3. If invalid, runtime redirects to AuditAuth login.
4. AuditAuth validates credentials and policy (including MFA if required).
5. AuditAuth returns code/tokens through callback flow.
6. SDK stores session material in runtime-appropriate storage.
7. Application resumes with enforced identity state.

Authentication and enforcement are separate responsibilities.

---

## Token Model

AuditAuth uses a dual-token model:

- Access token
- Refresh token

### Access Token

- Short-lived credential for protected requests.
- Used in `Authorization: Bearer <token>` flows.
- Validated against signature, issuer, and audience.

### Refresh Token

- Longer-lived credential used to obtain new access tokens.
- Rotation is managed by SDK refresh workflows.
- Failure to refresh transitions session to unauthenticated state.

Tokens are never generated inside the client application.

---

## Session Model

A session represents an authenticated identity within a specific application.

A session includes:

- User identity profile.
- Application scope (`app_id`).
- Active token context.
- Lifecycle metadata.

Sessions are:

- Created after successful authentication.
- Refreshed automatically when allowed.
- Revoked on logout or invalidation events.

---

## Session Lifecycle

The lifecycle of a session includes:

- Creation
- Validation
- Refresh
- Revocation/expiry

SDKs handle validation and refresh logic automatically.

If refresh fails, the session MUST be considered invalid and access MUST be rejected until re-authentication.

---

## Application Scope

Sessions are scoped per application.

A user authenticated for one application does not automatically gain access to another application.

Each application maintains isolated identity boundaries.

---

## Security Considerations

- Authentication credentials are not processed by application auth forms.
- Access decisions depend on validated token claims.
- Token rotation minimizes impact of leaked access tokens.
- Invalid sessions MUST fail closed with explicit unauthorized handling.

---

## Next Step

To understand how identity events are tracked and audited, continue with:

- Governance & Audit
